name: Fifter issue by title and send email

on:
  issues:
    types: [opened]

jobs:
  alert:
    runs-on: ubuntu-latest
    name: Fifter issue by title and send email
    steps: 
    - uses: actions/github-script@v5
      id: script
      with:
        script: |
          const { data } = await github.issues.get({
            owner: context.repo.owner,
            repo: context.repo.repo,
            issue_number: context.issue.number
          })
          return {
            title: data.title,
            body: data.body
          }
    -  run: echo "ðŸŽ‰ ${{ context.issue.number }}"
    -  run: echo "ðŸŽ‰ ${{ context.issue.title }}"
    -  run: echo "ðŸŽ‰ ${{ context.issue.body }}"
    -  run: echo "ðŸŽ‰ ${{ context.issue.created_at }}" 
    - uses: xu-ms/github-actions-issue-to-open@simple-sync
      env:
        github_token: "${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}"  
        title: "${{ steps.extract.outputs.title }}"
        body: "${{ steps.extract.outputs.body }}"
        created_at: "${{ steps.extract.outputs.created_at }}"
